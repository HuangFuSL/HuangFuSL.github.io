
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Python中最常见的映射类型是字典。本文将从字典入手对Python中的映射类型进行探讨。">
      
      
      
      
        <link rel="prev" href="../sequence/">
      
      
        <link rel="next" href="../bytes/">
      
      
      <link rel="icon" href="../../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Python中的映射类型 - HuangFuSL's Blog</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PingFang+SC:300,300i,400,400i,700,700i%7CSource+Code+Pro:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"PingFang SC";--md-code-font:"Source Code Pro"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/timeago.css">
    
      <link rel="stylesheet" href="https://www.neoteroi.dev/mkdocs-plugins/css/neoteroi.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css">
    
      <link rel="stylesheet" href="../../../css/css_override.css">
    
      <link rel="stylesheet" href="../../../css/jupyter.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#python" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="HuangFuSL&#39;s Blog" class="md-header__button md-logo" aria-label="HuangFuSL's Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-journal-bookmark-fill" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M6 1h6v7a.5.5 0 0 1-.757.429L9 7.083 6.757 8.43A.5.5 0 0 1 6 8V1z"/>
  <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"/>
  <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"/>
</svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HuangFuSL's Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Python中的映射类型
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/HuangFuSL/HuangFuSL.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    HuangFuSL/HuangFuSL.github.io
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Welcome to HuangFuSL's blog

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../notes/2020/" class="md-tabs__link">
          
  
  
    
  
  随记

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../latex/" class="md-tabs__link">
          
  
  
    
  
  LaTeX

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../math/" class="md-tabs__link">
          
  
  
    
  
  课程笔记

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  写代码

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../japanese/" class="md-tabs__link">
          
  
  
    
  
  日语

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../about/" class="md-tabs__link">
        
  
  
    
  
  关于我

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          

    
    <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
    <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner">
        


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="HuangFuSL&#39;s Blog" class="md-nav__button md-logo" aria-label="HuangFuSL's Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-journal-bookmark-fill" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M6 1h6v7a.5.5 0 0 1-.757.429L9 7.083 6.757 8.43A.5.5 0 0 1 6 8V1z"/>
  <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"/>
  <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"/>
</svg>

    </a>
    HuangFuSL's Blog
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/HuangFuSL/HuangFuSL.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    HuangFuSL/HuangFuSL.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome to HuangFuSL's blog
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../notes/2020/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    随记
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../latex/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    LaTeX
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../math/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    课程笔记
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    写代码
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            写代码
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" checked>
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    编程语言
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            编程语言
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_1" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_2_1" id="__nav_5_2_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_2_1">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../killable-thread/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关闭运行的线程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../magic-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    魔术方法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sequence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python中的序列类型
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Python中的映射类型
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Python中的映射类型
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      字典
    </span>
  </a>
  
    <nav class="md-nav" aria-label="字典">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      迭代
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      可散列类型
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      构造
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      变种
    </span>
  </a>
  
    <nav class="md-nav" aria-label="变种">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#defaultdict" class="md-nav__link">
    <span class="md-ellipsis">
      defaultdict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ordereddict" class="md-nav__link">
    <span class="md-ellipsis">
      OrderedDict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chainmap" class="md-nav__link">
    <span class="md-ellipsis">
      ChainMap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#counter" class="md-nav__link">
    <span class="md-ellipsis">
      Counter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      扩展
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      集合
    </span>
  </a>
  
    <nav class="md-nav" aria-label="集合">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      运算
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bytes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python中的字节类型
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python中的函数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../decorator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    函数装饰器与闭包
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    
  
  
  
    <a href="../../rust/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Rust
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    算法
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            算法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../dsa/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    数据结构
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../leetcode/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Leetcode题解
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../machine-learning/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    机器学习
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_4" id="__nav_5_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            机器学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../machine-learning/linear-models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    线性模型
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../machine-learning/decision-tree/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    决策树
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../machine-learning/activation/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    神经网络
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../machine-learning/box-muller-transform/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    概率分布采样
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../machine-learning/gaussian-process/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    贝叶斯优化
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../machine-learning/autoencoder/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    自编码器
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../machine-learning/gan/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    生成对抗网络
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../machine-learning/bert/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    语言模型
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../machine-learning/reinforcement-learning/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    强化学习
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    其他
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            其他
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../svg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SVG动画
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../configuration/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    系统配置
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../japanese/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    日语
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于我
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
        </div>
    </div>
    </div>


    
    <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
    <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner">
            

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      字典
    </span>
  </a>
  
    <nav class="md-nav" aria-label="字典">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      迭代
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      可散列类型
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      构造
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      变种
    </span>
  </a>
  
    <nav class="md-nav" aria-label="变种">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#defaultdict" class="md-nav__link">
    <span class="md-ellipsis">
      defaultdict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ordereddict" class="md-nav__link">
    <span class="md-ellipsis">
      OrderedDict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chainmap" class="md-nav__link">
    <span class="md-ellipsis">
      ChainMap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#counter" class="md-nav__link">
    <span class="md-ellipsis">
      Counter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      扩展
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      集合
    </span>
  </a>
  
    <nav class="md-nav" aria-label="集合">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      运算
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
            <!-- <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=230 height=360 src="//music.163.com/outchain/player?type=0&id=5371395831&auto=1&height=430"></iframe> -->
        </div>
    </div>
    </div>


          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="python">Python中的映射类型<a class="headerlink" href="#python" title="Permanent link">&para;</a></h1>
<p>Python中最常见的映射类型是字典。本文将从字典入手对Python中的映射类型进行探讨。</p>
<h2 id="_1">字典<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>字典类型<code>dict</code>对应的抽象基类为<code>MutableMapping</code>。而<code>MutableMapping</code>是<code>Mapping</code>的子类。</p>
<p><code>dict</code>中的数据组织为键-值对的形式，字典对值的类型没有要求，但要求键的类型必须可散列（hashable）。由此可见，字典结构的底层实现类似散列表，以加快字典内元素的访问速度。字典的执行效率远高于列表。</p>
<p>Python 3.6及以后，<code>dict</code>类型在实现上是有序的，键的顺序取决于添加顺序，但标准并没有规定<code>dict</code>类型的有序性。因此两个键顺序不同的字典被视为相同。</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
<div class="admonition update">
<p class="admonition-title">New in version 3.9</p>
<p>Python 3.9中，字典对象支持<code>|</code>运算符，用于将两个字典合并为一个。当两个字典中出现重复值时右侧字典中的值优先。</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">sys</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">ver</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">if</span> <span class="n">ver</span><span class="o">.</span><span class="n">major</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">ver</span><span class="o">.</span><span class="n">minor</span> <span class="o">&gt;</span> <span class="mi">8</span><span class="p">:</span>
<span class="o">...</span>     <span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="o">...</span>     <span class="n">b</span> <span class="o">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
<span class="o">...</span>     <span class="nb">print</span><span class="p">(</span><span class="n">a</span> <span class="o">|</span> <span class="n">b</span> <span class="o">==</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
<span class="o">...</span> <span class="k">else</span><span class="p">:</span>
<span class="o">...</span>     <span class="nb">print</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
</div>
<h3 id="_2">迭代<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p><code>dict</code>对象是可迭代对象，当对<code>dict</code>对象进行迭代时，实际上是迭代<code>dict</code>的<strong>键</strong>。</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">4</span><span class="p">}:</span>
<span class="o">...</span>     <span class="nb">print</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="o">...</span>
<span class="mi">1</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
<ul>
<li><code>dict.keys()</code>方法返回由字典中的键组成的可迭代对象；</li>
<li><code>dict.values()</code>方法返回由字典中的值组成的可迭代对象；</li>
<li><code>dict.items()</code>方法返回由键-值元组组成的可迭代对象。</li>
</ul>
<p>注意，每次调用<code>values</code>方法时，都会返回一个新的迭代器。因此，即使是对同一个字典调用多次<code>values</code>方法，其返回值也不想等。</p>
<div class="admonition update">
<p class="admonition-title">Changed in version 3.8</p>
<p>内置函数<code>reversed</code>支持传递字典作为参数，返回字典中的键<strong>逆序</strong>组成的可迭代对象。</p>
</div>
<p>映射类型通常是可修改的，使用<code>types.MappingProxyType</code>会创建一个原映射的视图。对原映射的任何修改都会反映在视图中，但不能对视图进行任何直接的修改。此方法间接地创建一个不可修改的映射类型。</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">MappingProxyType</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">MappingProxyType</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span>
<span class="n">mappingproxy</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span> <span class="mi">5</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span>
<span class="n">mappingproxy</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="s1">&#39;mappingproxy&#39;</span> <span class="nb">object</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">support</span> <span class="n">item</span> <span class="n">assignment</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
<h3 id="_3">可散列类型<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>满足如下条件的对象称为可散列对象：</p>
<ol>
<li>如果该对象可散列，则在其生命周期中，该散列值不变</li>
<li>对象实现了<code>__hash__()</code>与<code>__eq__()</code>方法（没有实现<code>__eq__()</code>方法的对象不应实现<code>__hash__()</code>方法）</li>
<li>如果它和另一个对象相等，则两者有相同的散列值</li>
</ol>
<p>如：</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;abc&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">hash</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="nb">hash</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
<p>注：若一个自定义类型定义了<code>__eq__</code>，且没有定义<code>__hash__</code>，<code>__hash__</code>会被设为<code>None</code>。可散列的自定义对象必须有<code>__hash__</code>方法。</p>
<blockquote>
<p>以下内容来自于<a href="https://docs.python.org/3/reference/datamodel.html#object.__hash__">Python文档</a>
<iframe srcdoc="&lt;link href=&quot;https://docs.python.org/3/_static/classic.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;/&gt;&lt;link href=&quot;https://docs.python.org/3/_static/basic.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;/&gt;&lt;link href=&quot;https://docs.python.org/3/_static/pydoctheme.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;/&gt;&lt;p&gt;If a class does not define an &lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/reference/datamodel.html#object.__eq__&quot; title=&quot;object.__eq__&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;__eq__()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; method it should not define a&lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/reference/datamodel.html#object.__hash__&quot; title=&quot;object.__hash__&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;__hash__()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; operation either; if it defines &lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/reference/datamodel.html#object.__eq__&quot; title=&quot;object.__eq__&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;__eq__()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; but not&lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/reference/datamodel.html#object.__hash__&quot; title=&quot;object.__hash__&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;__hash__()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt;, its instances will not be usable as items in hashablecollections.  If a class defines mutable objects and implements an&lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/reference/datamodel.html#object.__eq__&quot; title=&quot;object.__eq__&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;__eq__()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; method, it should not implement &lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/reference/datamodel.html#object.__hash__&quot; title=&quot;object.__hash__&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;__hash__()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt;, since theimplementation of hashable collections requires that a key’s hash value isimmutable (if the object’s hash value changes, it will be in the wrong hashbucket).&lt;/p&gt;&lt;p&gt;User-defined classes have &lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/reference/datamodel.html#object.__eq__&quot; title=&quot;object.__eq__&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;__eq__()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; and &lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/reference/datamodel.html#object.__hash__&quot; title=&quot;object.__hash__&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;__hash__()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; methodsby default; with them, all objects compare unequal (except with themselves)and &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;x.__hash__()&lt;/span&gt;&lt;/code&gt; returns an appropriate value such that &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;y&lt;/span&gt;&lt;/code&gt;implies both that &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;y&lt;/span&gt;&lt;/code&gt; and &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;hash(x)&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;hash(y)&lt;/span&gt;&lt;/code&gt;.&lt;/p&gt;&lt;p&gt;A class that overrides &lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/reference/datamodel.html#object.__eq__&quot; title=&quot;object.__eq__&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;__eq__()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; and does not define &lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/reference/datamodel.html#object.__hash__&quot; title=&quot;object.__hash__&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;__hash__()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt;will have its &lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/reference/datamodel.html#object.__hash__&quot; title=&quot;object.__hash__&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;__hash__()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; implicitly set to &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;None&lt;/span&gt;&lt;/code&gt;.  When the&lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/reference/datamodel.html#object.__hash__&quot; title=&quot;object.__hash__&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;__hash__()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; method of a class is &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;None&lt;/span&gt;&lt;/code&gt;, instances of the class willraise an appropriate &lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/library/exceptions.html#TypeError&quot; title=&quot;TypeError&quot;&gt;&lt;code class=&quot;xref py py-exc docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;TypeError&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; when a program attempts to retrievetheir hash value, and will also be correctly identified as unhashable whenchecking &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;isinstance(obj,&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;collections.abc.Hashable)&lt;/span&gt;&lt;/code&gt;.&lt;/p&gt;&lt;p&gt;If a class that overrides &lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/reference/datamodel.html#object.__eq__&quot; title=&quot;object.__eq__&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;__eq__()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; needs to retain the implementationof &lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/reference/datamodel.html#object.__hash__&quot; title=&quot;object.__hash__&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;__hash__()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; from a parent class, the interpreter must be told thisexplicitly by setting &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;__hash__&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;&lt;ParentClass&gt;.__hash__&lt;/span&gt;&lt;/code&gt;.&lt;/p&gt;&lt;p&gt;If a class that does not override &lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/reference/datamodel.html#object.__eq__&quot; title=&quot;object.__eq__&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;__eq__()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; wishes to suppress hashsupport, it should include &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;__hash__&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;None&lt;/span&gt;&lt;/code&gt; in the class definition.A class which defines its own &lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/reference/datamodel.html#object.__hash__&quot; title=&quot;object.__hash__&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;__hash__()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; that explicitly raisesa &lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/library/exceptions.html#TypeError&quot; title=&quot;TypeError&quot;&gt;&lt;code class=&quot;xref py py-exc docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;TypeError&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; would be incorrectly identified as hashable byan &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;isinstance(obj,&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;collections.abc.Hashable)&lt;/span&gt;&lt;/code&gt; call.&lt;/p&gt;" style="border-width: 0px; display: block;" width="100%" height="300px"></iframe></p>
</blockquote>
<p>根据如上规则可以判断一些内置数据结构是否为可散列对象</p>
<ul>
<li>可变序列在生命周期中序列的内容可能发生变化，因此可变序列（如<code>list</code>、<code>set</code>等）不是可散列对象。</li>
<li>原子不可变数据类型满足如上所有条件，是可散列对象</li>
<li>容器<code>frozenset</code>要求其中的所有元素均为可散列对象，并且其中内容在整个生命周期中不会发生变化，因此是可散列对象</li>
<li>容器<code>tuple</code>中可以容纳不可散列对象，因此<code>tuple</code>不是可散列对象，但不含可散列对象的元组是可散列对象。</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">t1</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t2</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="n">unhashable</span> <span class="nb">type</span><span class="p">:</span> <span class="s1">&#39;list&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
<p>使用<code>hash</code>函数可以取得可散列对象的散列值。为了避免DOS攻击，在计算散列值时会加上一个随机的噪声。噪声的值仅在同一Python实例中相同。对于一个整数，若它的值小于散列值所允许的最大值（即可以被放进散列值所限定的空间内），则散列的值就是该整数的值。</p>
<p>散列表的使用是“空间换时间”策略的典型体现。为了尽可能减少冲突，散列表必须有较低的装填因子，这意味着散列表会占用更多的内存空间。</p>
<h3 id="_4">构造<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>字典提供了多种构造方式，如下构造字典<code>{'a': 1, 'b': 2}</code></p>
<ol>
<li>花括号构造，如<code>{'a': 1, 'b': 2}</code></li>
<li>通过类构造函数，如<code>dict(a=1, b=2)</code></li>
<li>通过元组/列表（只需是长度为2的可迭代对象）构造，如<code>dict([('a', 1), ['b', 2]])</code></li>
<li>通过<code>zip</code>打包构造，如<code>dict(zip(['a', 'b'], [1, 2]))</code></li>
<li>通过字典推导构造，如<code>{chr(97 + _): _ + 1 for _ in range(2)}</code></li>
</ol>
<h3 id="_5">变种<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p><code>collections</code>提供了字典的两个变种，即<code>defaultdict</code>与<code>OrderDict</code></p>
<h4 id="defaultdict">defaultdict<a class="headerlink" href="#defaultdict" title="Permanent link">&para;</a></h4>
<p>当在一个字典<code>d</code>中找不到键<code>k</code>时，Python会产生<code>KeyError</code>异常。使用<code>d.get(k, default)</code>可以为找不到的键设置默认返回值。但<code>dict.get</code>函数不会对字典进行更新，插入找不到的键。</p>
<p><code>dict.setdefault</code>提供了另一种从字典中获取值的方法。<code>setdefault</code>接收两个参数，第一个参数为<code>key</code>，第二个参数为可选的默认值<code>default</code>。当字典中找到<code>key</code>所对应的元素时，<code>setdefault</code>直接返回该值，否则<code>setdefault</code>会在字典中添加键值对<code>key: default</code>，然后返回<code>default</code>。</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="p">{}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> 
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
<p>使用<code>setdefault</code>从字典中获取值时，可以减少字典的查询次数，提高字典执行的效率：</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="p">{}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">try</span><span class="p">:</span>
<span class="o">...</span>     <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="o">...</span> <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
<span class="o">...</span>     <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="o">...</span>     <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="o">...</span>        
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">]}</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
<p>如上使用<code>try-except</code>结构处理字典中找不到值的结果，如果使用<code>setdefault</code>函数，则可以有效减少代码长度，增加代码可读性。</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="p">{}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">]}</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
<p><code>defaultdict</code>可以用于处理字典中缺失的键。准确地说，<code>defaultdict</code>在创建时需要提供一个可调用对象作为参数，字典中找不到键时，<code>defaultdict</code>会通过调用这个可调用对象来得到该键对应的默认值。</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="n">defaultdict</span><span class="p">(</span><span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">list</span><span class="s1">&#39;&gt;, </span><span class="si">{}</span><span class="s1">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">[</span><span class="kc">False</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">[</span><span class="kc">False</span><span class="p">]</span>
<span class="p">{}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">[</span><span class="kc">True</span><span class="p">]</span>
<span class="p">[]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="n">defaultdict</span><span class="p">(</span><span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">list</span><span class="s1">&#39;&gt;, {False: </span><span class="si">{}</span><span class="s1">, True: []})</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
<p>如果创建<code>defaultdict</code>时没有指定参数，访问不存在的键时仍会抛出<code>KeyError</code>。</p>
<p>事实上，<code>__getitem__</code>通过特殊方法<code>__missing__</code>处理字典中缺失的键。手动调用<code>__missing__</code>方法能实现相同的效果：</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> 
<span class="n">defaultdict</span><span class="p">(</span><span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">list</span><span class="s1">&#39;&gt;, </span><span class="si">{}</span><span class="s1">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="fm">__missing__</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  
<span class="p">[]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="n">defaultdict</span><span class="p">(</span><span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">list</span><span class="s1">&#39;&gt;, {0: []})</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
<p><code>__missing__</code>方法的参数为<code>self, key</code>，其中<code>key</code>为缺失的键。即使<code>__missing__</code>正常执行，返回值也不会被添加到字典中。</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">NumDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="o">...</span>             <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="o">...</span>     <span class="k">def</span> <span class="fm">__missing__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
<span class="o">...</span>             <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
<span class="o">...</span>                     <span class="k">return</span> <span class="mi">0</span>
<span class="o">...</span>             <span class="k">else</span><span class="p">:</span>
<span class="o">...</span>                     <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">NumDict</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">)])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">8</span><span class="p">,</span> <span class="ow">in</span> <span class="fm">__missing__</span>
<span class="ne">KeyError</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
<h4 id="ordereddict">OrderedDict<a class="headerlink" href="#ordereddict" title="Permanent link">&para;</a></h4>
<p><code>OrderedDict</code>是严格（在任何版本中）保持顺序的字典。在迭代过程中键的顺序保持一致。</p>
<p><code>OrderedDict</code>新增了<code>popitem</code>方法，默认移除并返回字典中最后添加的一个元素。如果手动指定<code>last</code>参数为<code>False</code>，则移除并返回字典中第一个添加的元素。同时，<code>move_to_end</code>是与之配合的移动方法，可以将字典中的键值对（由<code>key</code>参数指定）移动到字典一端（由<code>last</code>参数指定）。</p>
<h4 id="chainmap">ChainMap<a class="headerlink" href="#chainmap" title="Permanent link">&para;</a></h4>
<p><code>ChainMap</code>可以视为一种容纳映射的序列。相比于使用<code>dict.update()</code>或<code>|</code>运算符逐个合并映射，<code>ChainMap</code>有更高的效率。</p>
<p><code>ChainMap</code>也可以被视为映射，当在<code>ChainMap</code>对象中查询时，<code>ChainMap</code>会逐个查询其中的映射。当同一个键出现在不同的映射中时，<code>ChainMap</code>返回查询到的第一个结果。</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">ChainMap</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">ChainMap</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
<p>存储的映射在<code>ChainMap.maps</code>属性中，对该属性的修改会同时反映在<code>ChainMap</code>对象中。<code>parents</code>是一个通过属性方式访问的方法，返回去除原<code>ChainMap</code>中的第一个映射后的新<code>ChainMap</code>，原<code>ChainMap</code>保持不变。</p>
<p><code>new_child</code>提供了向<code>ChainMap</code>中添加映射的方法。新的映射被添加到<code>ChainMap</code>的开头，如果没有提供映射，则添加一个空字典。</p>
<p><code>ChainMap</code>并没有合并原有的映射，因此迭代<code>ChainMap</code>对象或对<code>ChainMap</code>对象调用<code>dict()</code>时只会应用到其中包含的第一个映射。</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
<h4 id="counter">Counter<a class="headerlink" href="#counter" title="Permanent link">&para;</a></h4>
<p><code>Counter</code>提供了对一系列值的统计方法。可以使用可迭代对象初始化<code>Counter</code>类型，<code>Counter</code>会自动统计可迭代对象中每个值的出现顺序。</p>
<blockquote>
<p><code>Counter</code>不会对输入的值进行检查，如果使用字典初始化并提供非整数类型的值，在调用<code>Counter.most_common()</code>方法或迭代<code>Counter.elements()</code>的返回值时会抛出<code>TypeError</code>异常。
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;0&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">elements</span><span class="p">():</span>
<span class="o">...</span>     <span class="k">pass</span>
<span class="o">...</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="s1">&#39;str&#39;</span> <span class="nb">object</span> <span class="n">cannot</span> <span class="n">be</span> <span class="n">interpreted</span> <span class="k">as</span> <span class="n">an</span> <span class="n">integer</span>
</code></pre></div></p>
<p>这一点在Python文档中有相应说明：</p>
<p><iframe style="border-width: 0px;" width="100%" height="360px" scrolling="no" srcdoc="&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://docs.python.org/3/_static/classic.css&quot; /&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://docs.python.org/3/_static/basic.css&quot; /&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://docs.python.org/3/_static/pydoctheme.css&quot; /&gt;&lt;div class=&quot;admonition note&quot;&gt;&lt;p class=&quot;admonition-title&quot;&gt;Note&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;highlighted&quot;&gt;Counter&lt;/span&gt;s were primarily designed to work with positive integers to represent running counts; however, care was taken to not unnecessarily preclude use cases needing other types or negative values.  To help with those use cases, this section documents the minimum range and type restrictions.&lt;/p&gt;&lt;ul class=&quot;simple&quot;&gt;&lt;li&gt;&lt;p&gt;The &lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/library/collections.html#collections.Counter&quot; title=&quot;collections.Counter&quot;&gt;&lt;code class=&quot;xref py py-class docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;&lt;span class=&quot;highlighted&quot;&gt;Counter&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; class itself is a dictionary subclass with no restrictions on its keys and values.  The values are intended to be numbers representing counts, but you &lt;em&gt;could&lt;/em&gt; store anything in the value field.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;The &lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/library/collections.html#collections.Counter.most_common&quot; title=&quot;collections.Counter.most_common&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;most_common()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; method requires only that the values be orderable.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;For in-place operations such as &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;c[key]&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;pre&quot;&gt;1&lt;/span&gt;&lt;/code&gt;, the value type need only support addition and subtraction.  So fractions, floats, and decimals would work and negative values are supported.  The same is also true for&lt;a class=&quot;reference internal&quot; href=&quot;https://docs.python.org/3/library/collections.html#collections.Counter.update&quot; title=&quot;collections.Counter.update&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;update()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; and &lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/library/collections.html#collections.Counter.update&quot; title=&quot;collections.Counter.subtract&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;subtract()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; which allow negative and zero values for both inputs and outputs.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;The multiset methods are designed only for use cases with positive values. The inputs may be negative or zero, but only outputs with positive values are created.  There are no type restrictions, but the value type needs to support addition, subtraction, and comparison.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;The &lt;a class=&quot;reference internal&quot; target=&quot;_blank&quot; href=&quot;https://docs.python.org/3/library/collections.html#collections.Counter.update&quot; title=&quot;collections.Counter.elements&quot;&gt;&lt;code class=&quot;xref py py-meth docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;elements()&lt;/span&gt;&lt;/code&gt;&lt;/a&gt; method requires integer counts.  It ignores zero and negative counts.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;../_static/switchers.js&quot;&gt;&lt;/script&gt;"></iframe></p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>          
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="n">Counter</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
<p>更新<code>Counter</code>对象时，计数器会相应地更新：</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="n">Counter</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
<p><code>Counter.elements()</code>方法返回一个迭代器，每个元素按照其出现次数重复。<code>Counter.most_common</code>方法返回计数器中出现次数最多的元素。</p>
<p><code>Counter</code>类型提供了<code>+</code>、<code>-</code>、<code>&amp;</code>和<code>|</code>运算符，分别对应计数器的相加、相减、交和并操作。当<code>+</code>、<code>-</code>被用作一元运算符时，另一个操作数默认为空计数器。</p>
<h3 id="_6">扩展<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p><code>collections.UserDict</code>类是对<code>dict</code>的Python实现，可以用于自定义映射类型的实现。</p>
<p><code>UserDict</code>不是<code>dict</code>的子类，但<code>UserDict</code>中有一个<code>dict</code>类型的<code>data</code>属性，是<code>UserDict</code>存储数据的最终位置。相比于直接对<code>dict</code>类型进行扩展，<code>data</code>属性保证了<code>__getitem__</code>方法不会产生循环递归的情况。</p>
<p><code>UserDict</code>类继承自<code>_collections_abc.MutableMapping</code>与<code>_collections_abc.Mapping</code>类。<code>MutableMapping</code>提供了<code>update()</code>方法。方法的内部实现表明，<code>update()</code>在内部通过<code>__setitem__</code>实现。<code>Mapping</code>提供了<code>get()</code>方法，该方法在内部通过<code>__getitem__</code>实现。</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">UserDict</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">myDict</span><span class="p">(</span><span class="n">UserDict</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="o">...</span>             <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>  
<span class="o">...</span>     <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="o">...</span>             <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Modification: &quot;</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="o">...</span>             <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="o">...</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">myDict</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">Modification</span><span class="p">:</span>  <span class="n">a</span> <span class="p">:</span> <span class="mi">5</span>
<span class="n">Modification</span><span class="p">:</span>  <span class="n">b</span> <span class="p">:</span> <span class="mi">4</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
<h2 id="_7">集合<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h2>
<p>集合<code>set</code>是一种序列类型，集合中的各个元素最多只能出现一次。任何非空集合可以使用字面表示法<code>{}</code>进行表示，空集只能用<code>set()</code>表示。集合同样适用于与列表推导相似的推导方式。</p>
<p>集合有对应的只读变种<code>frozenset</code>。<code>set</code>可以通过字面表示法进行构造，或使用可迭代对象进行构造。<code>frozenset</code>只能使用可迭代对象构造。</p>
<blockquote>
<p>可以利用<code>set</code>中元素的唯一性去除列表中的重复值：</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">src_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">src_list</span><span class="p">))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
<p>另一种方法是通过<code>collections.Counter</code>去重。</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">src_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">Counter</span><span class="p">(</span><span class="n">src_list</span><span class="p">)</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div>
</blockquote>
<p>和字典的键一样，集合中的元素必须是可散列的。<code>set</code>类型本身不可散列，<code>frozenset</code>类型可散列。</p>
<h3 id="_8">运算<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>集合有如下运算，由于集合的底层数据结构是散列表，这些运算方法有较高的计算效率。</p>
<ul>
<li>交集、并集、差集、对称差，即<code>&amp;</code>、<code>|</code>、<code>-</code>与<code>^</code>；</li>
<li>子集、真子集、超集、真超集，即<code>&lt;=</code>、<code>&lt;</code>、<code>&gt;=</code>与<code>&gt;</code>；</li>
<li>属于，即<code>in</code></li>
</ul>
<p>以<code>in</code>操作为例，<code>set</code>可以直接查询散列表获取结果，但<code>list</code>必须扫描一遍列表才能获取结果。对于含有许多元素的序列，两者在执行速度上有明显的差别。</p>
<p><code>set</code>还支持<code>add</code>、<code>clear</code>、<code>copy</code>、<code>pop</code>、<code>remove</code>等方法。</p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="2022年11月9日 04:16:26"><span class="timeago" datetime="2022-11-09T04:16:26+00:00" locale="zh"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="2022年11月9日 04:16:26">2022-11-09</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="创建日期">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="2021年1月28日 15:14:05"><span class="timeago" datetime="2021-01-28T15:14:05+00:00" locale="zh"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="2021年1月28日 15:14:05">2021-01-28</span>
  </span>

    
    
    
  </aside>




<h2 id="__comments">评论</h2>
<script src="https://giscus.app/client.js"
        data-repo="HuangFuSL/HuangFuSL.github.io"
        data-repo-id="MDEwOlJlcG9zaXRvcnkzMTQyMTQ4MTE="
        data-category="Comments"
        data-category-id="DIC_kwDOErqJm84CShoc"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>

<!-- Synchronize Giscus theme with palette -->
<script>
    var giscus = document.querySelector('script[src*=giscus]');

    /* Set palette on initial load */
    var palette = __md_get('__palette');
    if (palette && typeof palette.color === 'object') {
        var theme = palette.color.scheme === 'slate' ? 'dark' : 'light';
        giscus.setAttribute('data-theme', theme);
    }

    /* Register event handlers after documented loaded */
    document.addEventListener('DOMContentLoaded', function () {
        var ref = document.querySelector('[data-md-component=palette]');
        ref.addEventListener('change', function () {
            var palette = __md_get('__palette');
            if (palette && typeof palette.color === 'object') {
                var theme = palette.color.scheme === 'slate' ? 'dark' : 'light';

                /* Instruct Giscus to change theme */
                var frame = document.querySelector('.giscus-frame');
                frame.contentWindow.postMessage(
                    { giscus: { setConfig: { theme } } },
                    'https://giscus.app'
                );
            }
        });
    });
</script>
                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/HuangFuSL" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/u/huangfusl" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://steamcommunity.com/id/huangfusl/" target="_blank" rel="noopener" title="steamcommunity.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M496 256c0 137-111.2 248-248.4 248-113.8 0-209.6-76.3-239-180.4l95.2 39.3c6.4 32.1 34.9 56.4 68.9 56.4 39.2 0 71.9-32.4 70.2-73.5l84.5-60.2c52.1 1.3 95.8-40.9 95.8-93.5 0-51.6-42-93.5-93.7-93.5s-93.7 42-93.7 93.5v1.2L176.6 279c-15.5-.9-30.7 3.4-43.5 12.1L0 236.1C10.2 108.4 117.1 8 247.6 8 384.8 8 496 119 496 256M155.7 384.3l-30.5-12.6a52.8 52.8 0 0 0 27.2 25.8c26.9 11.2 57.8-1.6 69-28.4 5.4-13 5.5-27.3.1-40.3S206 305.6 193 300.2c-12.9-5.4-26.7-5.2-38.9-.6l31.5 13c19.8 8.2 29.2 30.9 20.9 50.7-8.3 19.9-31 29.2-50.8 21m173.8-129.9c-34.4 0-62.4-28-62.4-62.3s28-62.3 62.4-62.3 62.4 28 62.4 62.3-27.9 62.3-62.4 62.3m.1-15.6c25.9 0 46.9-21 46.9-46.8 0-25.9-21-46.8-46.9-46.8s-46.9 21-46.9 46.8c.1 25.8 21.1 46.8 46.9 46.8"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.zhihu.com/people/huang-fu-shuo-long" target="_blank" rel="noopener" title="www.zhihu.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M170.54 148.13v217.54l23.43.01 7.71 26.37 42.01-26.37h49.53V148.13zm97.75 193.93h-27.94l-27.9 17.51-5.08-17.47-11.9-.04V171.75h72.82zm-118.46-94.39H97.5c1.74-27.1 2.2-51.59 2.2-73.46h51.16s1.97-22.56-8.58-22.31h-88.5c3.49-13.12 7.87-26.66 13.12-40.67 0 0-24.07 0-32.27 21.57-3.39 8.9-13.21 43.14-30.7 78.12 5.89-.64 25.37-1.18 36.84-22.21 2.11-5.89 2.51-6.66 5.14-14.53h28.87c0 10.5-1.2 66.88-1.68 73.44H20.83c-11.74 0-15.56 23.62-15.56 23.62h65.58C66.45 321.1 42.83 363.12 0 396.34c20.49 5.85 40.91-.93 51-9.9 0 0 22.98-20.9 35.59-69.25l53.96 64.94s7.91-26.89-1.24-39.99c-7.58-8.92-28.06-33.06-36.79-41.81L87.9 311.95c4.36-13.98 6.99-27.55 7.87-40.67h61.65s-.09-23.62-7.59-23.62zm412.02-1.6c20.83-25.64 44.98-58.57 44.98-58.57s-18.65-14.8-27.38-4.06c-6 8.15-36.83 48.2-36.83 48.2zm-150.09-59.09c-9.01-8.25-25.91 2.13-25.91 2.13s39.52 55.04 41.12 57.45l19.46-13.73s-25.67-37.61-34.66-45.86h-.01zM640 258.35c-19.78 0-130.91.93-131.06.93v-101c4.81 0 12.42-.4 22.85-1.2 40.88-2.41 70.13-4 87.77-4.81 0 0 12.22-27.19-.59-33.44-3.07-1.18-23.17 4.58-23.17 4.58s-165.22 16.49-232.36 18.05c1.6 8.82 7.62 17.08 15.78 19.55 13.31 3.48 22.69 1.7 49.15.89 24.83-1.6 43.68-2.43 56.51-2.43v99.81H351.41s2.82 22.31 25.51 22.85h107.94v70.92c0 13.97-11.19 21.99-24.48 21.12-14.08.11-26.08-1.15-41.69-1.81 1.99 3.97 6.33 14.39 19.31 21.84 9.88 4.81 16.17 6.57 26.02 6.57 29.56 0 45.67-17.28 44.89-45.31v-73.32h122.36c9.68 0 8.7-23.78 8.7-23.78z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://space.bilibili.com/387905326" target="_blank" rel="noopener" title="space.bilibili.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79 0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0q13.2 0 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0q13.2 0 21.9 8.603c5.7 5.737 8.6 12.997 8.6 21.797 0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1m-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8s9.7-14.3 10.1-23.5zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.2 6.3-14 9.5-23.6 9.5s-17.5-3.2-23.6-9.5-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2s13.2-9.6 23.3-10c9.2.4 17 3.7 23.3 10m191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2s-14 9.5-23.6 9.5-17.4-3.2-23.6-9.5c-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2s14.1-9.6 23.3-10c9.2.4 17 3.7 23.3 10"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "content.code.annotate", "navigation.tracking", "navigation.prune", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.indexes", "navigation.top", "toc.follow", "search.suggest"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../../js/timeago.min.js"></script>
      
        <script src="../../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../../js/loadColor.js"></script>
      
        <script src="../../../js/love.js"></script>
      
        <script src="../../../js/jupyter.js"></script>
      
        <script src="../../../js/katex.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>